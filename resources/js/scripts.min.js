function lazyLoad(){$(".lazy").Lazy({effect:"fadeIn",effectTime:300})}function hide_show_content(){let e=$(".game-description").outerHeight();e<=739?($(".show_content").css({display:"none"}),$(".game-description").attr("style","height:unset")):($(".game-description").attr("style","height:740px;overflow:hidden"),$(".show_content").css({display:"flex"}),$(".ShowMore_button").addClass("more"),$(".content-inner").css({"padding-bottom":"50px"})),$(".ShowMore_button").click(function(){$(".ShowMore_button").hasClass("more")?($(".ShowMore_button").removeClass("more"),$(".game-description").animate({height:e+"px",overflow:"hidden",animation:"height 1000ms ease 0ms"},{easing:"swing",complete:function(){$(".game-description").attr("style","height:auto"),$(".ShowMore_button").html('Show less <span class="svg-icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-keyboard_arrow_up"></use> </svg></span>'),$(".ShowMore_button").addClass("less")}})):($(".ShowMore_button").removeClass("less"),$(".game-description").animate({height:"740px",overflow:"hidden",animation:"height 1000ms ease 0ms"},{easing:"swing",complete:function(){$(".game-description").attr("style","height:740px;overflow:hidden"),$(".ShowMore_button").html('Show more <span class="svg-icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-keyboard_arrow_down"></use> </svg></span>'),$(".ShowMore_button").addClass("more")}}))})}function copyToClipboard(e,t){var o=$("<input>");$("body").append(o),$(e).select(),document.execCommand("copy"),$(t).html("COPIED!!"),setTimeout(function(){$(t).html("Copy link")},3e3),o.remove()}function readTextFile(e,t){var o=new XMLHttpRequest;o.overrideMimeType("application/json"),o.open("GET",e,!0),o.onreadystatechange=function(){4===o.readyState&&"200"==o.status&&t(o.responseText)},o.send(null)}function search(e,t){return t=t.toString().toLowerCase(),e.filter(function(e){return Object.keys(e).some(function(o){return -1!==e[o].toString().toLowerCase().indexOf(t)})})}function search_json(){$("input#search_txt").each(function(){0==$(this).val().length&&$("#search_button").attr("disabled","disabled")}),$("input#search_txt").keyup(function(e){var t=$("input#search_txt").val();if(t.length>=3){let o=!1;$("input#search_txt").each(function(){o=0==$(this).val().length}),o?$("#search_button").attr("disabled","disabled"):($("#search_button").attr("disabled",!1),$("#searchModalLabel").html("Result for "+t),readTextFile(game_config.domain_root+"games.json",function(e){var o=JSON.parse(e),a=search(o,t);$(".search-results").find(".search__result_container").length>0&&$(".search-results").find(".search__result_container").remove();let s='<div class="search__result_container absolute z-50 left-0 right-0 mt-6 rounded-3xl shadow-2xl shadow-[#007b43]/10 dark:shadow-[#007b43]/5 max-h-[60vh] overflow-hidden dark:bg-gray-900/98 backdrop-blur-sm transition-all duration-300 animate-in fade-in slide-in-from-top-2"> <div class="overflow-y-auto max-h-[60vh] [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-track]:bg-[#007b43]/5 dark:[&::-webkit-scrollbar-track]:bg-[#007b43]/10 [&::-webkit-scrollbar-thumb]:bg-[#007b43]/30 dark:[&::-webkit-scrollbar-thumb]:bg-[#007b43]/20 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:rounded-full"> <div class="divide-y divide-[#007b43]/10 dark:divide-[#007b43]/5">';a.length>0?(console.log("result lenght:"+a.length),a.forEach(function(e,t){let o="";s+=`<a href="${o=e.slug===game_config.home_page?"/":"/"+e.slug}" class="link_search_complete w-full flex items-center group transition-all duration-300 gap-4 p-2"> <div class="relative flex-shrink-0 rounded overflow-hidden ring-2 ring-[#007b43]/20 transition-all duration-300 w-8 h-8"> <img src="${e.image}" alt="${e.name}" class="object-cover w-full h-full flex-shrink-0 transition-transform duration-500 group-hover:scale-110" loading="lazy"></div> <div class="flex-1 min-w-0 text-left text_search_complete text_color">${e.name}</div> </a>`})):s+=`<div class="p-4 "><h3 class="text-dark">No result for ${t}</h3></div>`,s+="</div></div></div>",$(".search-results").append(s);let n=document.getElementById("search_txt");n.addEventListener("focus",function(){document.getElementsByClassName("search__result_container")[0].style.display="block"}),n.addEventListener("focusout",function(){setTimeout(function(){document.getElementsByClassName("search__result_container")[0].style.display="none"},500)}),$("#search_txt").keyup(delay(function(e){$("#search_txt").val().length<3&&($(".search__result_container").css("display","none"),$(".no-result-search").hide())},300))}))}})}function slider_js(){new Swiper(".games-hot-slide .swiper",{slidesPerView:5.5,spaceBetween:18,speed:600,freeMode:!0,navigation:{nextEl:".games-hot-slide .next_btn",prevEl:".games-hot-slide .prev_btn"},draggable:!0,breakpoints:{1386:{slidesPerView:"6",freeMode:!0},1199:{slidesPerView:"5",freeMode:!0},991:{slidesPerView:"4",freeMode:!0},600:{freeMode:!0,slidesPerView:"3"},500:{freeMode:!0,slidesPerView:"2.3"},400:{freeMode:!0,slidesPerView:"2"}}}).on("slideChange",function(){lazyLoad()}),new Swiper(".sliderCategoryList .swiper",{slidesPerView:"auto",spaceBetween:12,speed:600,freeMode:!0,navigation:{nextEl:".sliderCategoryList .next_btn",prevEl:".sliderCategoryList .prev_btn"},draggable:!0}),new Swiper(".games-top-week .swiper",{slidesPerView:5.5,spaceBetween:18,speed:600,freeMode:!0,navigation:{nextEl:".games-top-week .next_btn",prevEl:".games-top-week .prev_btn"},draggable:!0,breakpoints:{1386:{slidesPerView:"6",freeMode:!0},1199:{slidesPerView:"5",freeMode:!0},991:{slidesPerView:"4",freeMode:!0},600:{freeMode:!0,slidesPerView:"3"},500:{freeMode:!0,slidesPerView:"2.3"},400:{freeMode:!0,slidesPerView:"2"}}}).on("slideChange",function(){lazyLoad()})}function open_fullscreen(){let e=document.getElementById("game-area");null!=e&&(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))}function delay(e,t){var o=0;return function(){var a=this,s=arguments;clearTimeout(o),o=setTimeout(function(){e.apply(a,s)},t||0)}}function show_hide_sidebar_mobile(){$(".menu").on("click",function(){$(".sidebar-mobile").css("transform","translateX(0)"),$(".bg-overlay").css("display","block")}),$(".btn-close-sidebar").on("click",function(){$(".sidebar-mobile").css("transform","translateX(-100%)"),$(".bg-overlay").css("display","none")}),$(document).mouseup(function(e){0===$(e.target).closest(".sidebar-mobile").length&&($(".sidebar-mobile").css("transform","translateX(-100%)"),$(".bg-overlay").css("display","none"))})}function menu_sidebar_active(){var e=window.location.pathname;$(".side-nav ul li a").each(function(){$(this).attr("href")==e&&($(this).addClass("active"),$(this).removeClass("text-gray-600 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#007b43]/5 hover:to-[#4ade80]/5 dark:hover:from-[#007b43]/10 dark:hover:to-[#4ade80]/10"),$(this).addClass("bg-gradient-to-r from-[#007b43] to-[#4ade80]"),$(this).find("span").removeClass("text_color"),$(this).find("span").css("color","white"))})}function open_dialog(){$(".toggleModalBtn").on("click",function(){var e=$(this).data("target");$(this).toggleClass("open");var t=$(e);$(this).hasClass("open")?($(".toggleModalBtn").removeClass("open"),$(".toggleModalBtn").removeClass("active"),$(this).addClass("open"),$(this).addClass("active"),$(".blur_dialog").removeClass("active"),$(".blur_dialog").find(".game_dialog_container").removeClass("slide-out"),t.addClass("active")):close_dialog(e)}),$(".closeModalBtn").on("click",function(){close_dialog($(this).closest(".blur_dialog"))})}function close_dialog(e){var t=$(e).closest(".blur_dialog");$(".toggleModalBtn").removeClass("open"),$(".toggleModalBtn").removeClass("active"),t.removeClass("active")}function add_module(){game_config.url_game&&$.ajax({url:"/add-module.ajax",type:"POST",data:{url_game:game_config.url_game},success:function(e){if(e){let t=JSON.parse(e);$("#csrf-token").length&&$("#csrf-token").remove(),$("#gmuid").length&&$("#gmuid").remove(),$("body").append(t.gm_layout),game_vote_load()}}})}function event_send_vote(e){let t=$(e).data("game"),o=$(e).data("vote"),a=$("#game_vote_panel").data("url"),s=$("#vote-up"),n=$("#vote-down"),i=$("#up-count"),r=$("#down-count"),l=s.find(".g-footer__button-title_last"),d=n.find(".g-footer__button-title_last"),c=$(e).hasClass("voted");$(".button_vote_game").removeClass("voted"),$(".g-footer__button-title_last").text(""),d.text("Dislike"),l.text("Like");let u=readFromLocalStorage("voted_game"),g="";u&&u.length>0&&$.each(u,function(e,o){o.id==t&&(g=o.vote)}),c||($(e).addClass("voted"),$(e).find(".g-footer__button-title_last").text("Remove")),$(e).blur();let v=$("#csrf-token").val(),m=$("#gmuid").val();null!=e&&$.ajax({url:"/game-vote.ajax",method:"POST",data:{vote:o,id:t,token:v,gmuid:m,url:a,pre_vote:g},success:function(e){i.text(formatNumber(e.up_count)||0),r.text(formatNumber(e.down_count)||0),$("#csrf-token").val(e.t),game_vote_save(t,o)},error:function(e,t,o){console.error("Error:",o)}})}function game_vote_save(e,t){if(readFromLocalStorage("voted_game")&&""!==e&&""!==t){let o=readFromLocalStorage("voted_game"),a=!1;if(jQuery.each(o,function(s,n){void 0!==n&&n.id===e&&s>-1&&(n.vote===t&&(a=!0),o.splice(s,1))}),a){saveToLocalStorage("voted_game",JSON.stringify(o));return}o.push({id:e,vote:t}),saveToLocalStorage("voted_game",JSON.stringify(o))}else{var s=[];s.push({id:e,vote:t}),saveToLocalStorage("voted_game",JSON.stringify(s))}}function game_vote_load(){if($("#game_vote_panel").length>0){let e=$("#game_vote_panel").data("game"),t=$("#game_vote_panel").data("url");var o=$("#csrf-token").val();let a=$("#vote-up"),s=$("#vote-down"),n=$("#up-count"),i=$("#down-count"),r=a.find(".g-footer__button-title_last"),l=s.find(".g-footer__button-title_last");$.getJSON("/game-vote.ajax",{id:e,token:o,url:t}).done(function(o){n.text(formatNumber(o.up_count)||0),i.text(formatNumber(o.down_count)||0),$("#csrf-token").val(o.t);let d="voted_game";if(readFromLocalStorage(d)){var c=readFromLocalStorage(d);let u="";c.length>0&&$.each(c,function(t,o){o.id==e&&("like"===(u=o.vote)?(a.addClass("voted"),r.text("Remove"),s.removeClass("voted")):"dislike"===u?(s.addClass("voted"),l.text("Remove"),a.removeClass("voted"),console.log("dislike")):(a.removeClass("voted"),s.removeClass("voted"),l.text("Dislike"),r.text("Like"),console.log("not vote")))})}"yes"===game_config.show_comment&&load_comment(1,10,"newest",t,"#list_comment","f5",o.t)}).fail(function(e,t,o){console.log("Request Failed: "+t+", "+o)})}}function formatNumber(e){if(e<1e3)return e.toString();for(var t=["k","M","B","T"],o=-1,a=e;a>=1e3&&o<t.length-1;)a/=1e3,o++;var s=a<10?1:0;return a.toFixed(s)+t[o]}function saveToLocalStorage(e,t){let o="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,o)}function readFromLocalStorage(e){let t=localStorage.getItem(e);if(null===t)return[];try{return JSON.parse(t)}catch(o){return t}}function removeFromLocalStorage(e){localStorage.removeItem(e)}function report_open(e){$(e).toggleClass("active");let t=$(e).attr("data-game-name");$("#contact-popup").toggleClass("show"),$("#game_report_name").val(t),$("#game_report_url").val(game_config.url_game)}function report_close(){$("#contact-popup").removeClass("show"),$(".report_bug").removeClass("active")}function submit_form_contact(){function e(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}$('input[name="email_contact"]').on("keyup",function(){var t=$(this).val().trim(),o=$(this).next(".error-message-email");if(""===t){$(this).removeClass("error-field"),o.hide();return}e(t)?($(this).removeClass("error-field"),o.hide()):($(this).addClass("error-field"),o.text("Please enter a valid email address.").show())}),$("#bugReportForm").on("submit",function(t){t.preventDefault();var o,a=$(this),s=$('select[name="type_contact"]').val(),n=$("#content_contact").val().trim(),i=$('input[name="email_contact"]').val().trim(),r=!0,l="";if(s?n?n.length<10?(r=!1,l="Description must be at least 10 characters."):(o=n,/\S/.test(o))?""===i||e(i)||(r=!1,l="Please enter a valid email."):(r=!1,l="Description cannot be empty."):(r=!1,l="Please describe the bug."):(r=!1,l="Please select an issue type."),r)$(".error_form_contact").hide().text("");else{$(".error_form_contact").show().text(l),l.includes("email")&&$('input[name="email_contact"]').addClass("error-field");return}var d=new FormData(this),c=$("#csrf-token").val(),u=$("#gmuid").val();d.append("token",c),d.append("gmuid",u),$.ajax({url:"/feedback.ajax",type:"POST",data:d,processData:!1,contentType:!1,success:function(e){var t=e;console.log(t),$("#csrf-token").val(t.t),report_close(),a.trigger("reset"),$('input[name="screenshot"]').hide(),notify("Thank you !",2e3,"rt")},error:function(e,t,o){alert("Error submitting bug report: "+o)}})})}function notify(e,t,o="bt"){let a="";a+='<div class="notify-toast" style="position: fixed; bottom: 20px; right: -300px; z-index: 1000;">',a+='<div class="toast-content">',a+='<div class="content-notify">',a+="<span>"+e+"</span>",a+="</div>",a+="</div>",a+="</div>";let s=$(a).appendTo("body");"rt"===o?s.show().animate({right:"20px"},500).delay(t).animate({right:"-300px"},500,function(){$(this).remove()}):s.css({bottom:"-100px"}).show().animate({bottom:"20px"},500).delay(t).animate({bottom:"-100px"},500,function(){$(this).remove()})}function favorite(e){var t,o=$(e).data("image"),a=$(e).data("id"),s=$(e).data("slug"),n=$(e).data("name"),i=$(e).data("url");$(e).hasClass("favorited")?(remove_wishlist_cookies(a),$(e).removeClass("favorited"),t=!0):(save_wishlish_cookies(a,s,o,n,i),$(e).addClass("favorited"),t=!1),notifical_show(a,n,o,s,t,e)}function notifical_show(e,t,o,a,s,n){let i="";i+='<span class="svg-icon svg-icon--heart btn__icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-heart"></use> </svg> </span>',i+=`
      <div class="g-footer__button-title">
        <span class="g-footer__button-title_text g-footer__button-title_first"></span>
        <span class="g-footer__button-title_text g-footer__button-title_last">
          ${s?"Add":"Remove"}
        </span>
      </div>
    `,$(n).find(".g-footer__button-title").remove(),$(n).html(i);let r="";r+='<div class="notification-success"> <div class="toastt"> <div class="content_notification"> <div class="icon"><img width="50" height="50" src="'+o+'" class="img-fluid" /></div> <div class="details"> <span>'+(!0==s?"Remove":"Add")+" Success</span> <p>"+t+"</p> </div> </div> </div> </div>",$("body").one("click",n,function(){notification(r,1e3)})}function notification(e,t){$(e).appendTo("body").fadeTo(t,1,function(){$(this).fadeTo(1e3,0,function(){$(this).addClass("hide"),$(this).remove()})})}function remove_wishlist_cookies(e){if(readFromLocalStorage("favorite_game")&&""!==e){var t=readFromLocalStorage("favorite_game");jQuery.each(t,function(o,a){t=t.filter(function(e){return void 0!==e}),a.id===e&&o>-1&&t.splice(o,1)}),saveToLocalStorage("favorite_game",JSON.stringify(t)),$(".favorites-add-"+e).removeClass("favorited"),$(".favorites-add-"+e).html('<span class="svg-icon svg-icon--heart btn__icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-heart"></use> </svg> </span> <div class="g-footer__button-title"> <span class="g-footer__button-title_text g-footer__button-title_first"></span> <span class="g-footer__button-title_text g-footer__button-title_last">Add</span> </div>'),load_wishlist_cookies()}}function save_wishlish_cookies(e,t,o,a,s){if(readFromLocalStorage("favorite_game")&&""!==t&&""!==o&&""!==e&&""!=a){var n=readFromLocalStorage("favorite_game");jQuery.each(n,function(e,o){void 0!==o&&o.slug===t&&e>-1&&n.splice(e,1)}),n.push({id:e,slug:t,image:o,name:a,url:s}),n.length>10&&n.shift(),saveToLocalStorage("favorite_game",JSON.stringify(n))}else{var i=[];i.push({id:e,slug:t,image:o,name:a,url:s}),saveToLocalStorage("favorite_game",JSON.stringify(i))}load_wishlist_cookies()}function load_wishlist_cookies(){if(readFromLocalStorage("favorite_game")){var e=readFromLocalStorage("favorite_game");let t="";if(e.length>0){var o="";let a="";var s=e.length;a+='<span class="svg-icon svg-icon--heart btn__icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-heart"></use> </svg> </span>';for(var n=s-1;n>=0;n--){var i=e[n];o+='<a href="'+i.url+'" class="thumb-card relative group relative block h-full overflow-hidden rounded-xl bg-white/95 dark:bg-neutral-900/95 backdrop-blur-md shadow-lg hover:shadow-2xl transform transition-all duration-300 hover:-translate-y-1.5 will-change-transform"><div class="w-full overflow-hidden"><img src="'+i.image+'" alt="'+i.name+'" sizes="(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 20vw" class="object-cover" loading="lazy" style=""></div><div class="px-2 py-2 title-game"><span class="text-sm md:text-base font-medium text-[#007b43] group-hover:text-[#00a35a] transition-colors duration-300 line-clamp-2">'+i.name+"</span></div></a>",i.slug!==game_config.current_slug||$(".favorites-add-"+i.id).hasClass("favorited")||$(".favorites-add-"+i.id).addClass("favorited")}$(".favorites_btn").hasClass("favorited")?a+='<div class="g-footer__button-title"> <span class="g-footer__button-title_text g-footer__button-title_first"></span> <span class="g-footer__button-title_text g-footer__button-title_last">Remove</span> </div>':a+='<div class="g-footer__button-title"> <span class="g-footer__button-title_text g-footer__button-title_first"></span> <span class="g-footer__button-title_text g-footer__button-title_last">Add</span> </div>',$(".favorites_btn").html(a),s>0?($(".badge_number").css("display","flex"),t+='<span class="nav-badge favourites_qty">'+s+"</span>"):$(".badge_number").hide(),$(".badge_number").find(".favourites_qty").length>0&&($(".badge_number").find(".favourites_qty").remove(),$(".badge_number").append(t)),""!=o&&jQuery("#favoriteGames").html(o),$(".empty_favorite").hide()}else t+="",$(".badge_number").css("display","none"),jQuery("#favoriteGames").html(""),$(".empty_favorite").show(),$(".empty_favorite").html("<center>No favorite game</center>");jQuery(".favorite-link .count_num").html(t)}else $(".empty_favorite").show(),$(".empty_favorite").html("<center>No favorite game</center>"),jQuery("#favoriteGames").html(""),$(".badge_number").css("display","none")}window.addEventListener("DOMContentLoaded",function(){search_json(),load_wishlist_cookies(),$(".scrollTo").on("click",function(e){e.preventDefault();var t=$(this).attr("data-target");let o=$("#"+t);console.log(o),$("html, body").animate({scrollTop:o.offset().top},500,"swing")});let e=/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t="ontouchstart"in window||navigator.maxTouchPoints>0;e||t?$("body").addClass("is_mobile"):$("body").removeClass("is_mobile");var o=$("#button-gotop");$(window).scroll(function(){$(window).scrollTop()>300?o.addClass("show"):o.removeClass("show")}),o.on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"300")}),lazyLoad(),slider_js(),show_hide_sidebar_mobile(),menu_sidebar_active(),open_dialog()}),$(document).on("click",function(e){$(e.target).closest(".blur_dialog").length||$(e.target).closest(".toggleModalBtn").length||$(".blur_dialog.active").each(function(){close_dialog(this)})}),$(document).on("click",".button_vote_game",function(){event_send_vote(this)}),$(document).on("click",function(e){$(e.target).closest("#contact-popup").length||$(e.target).closest(".report_bug").length||report_close()}),$(document).ready(function(){submit_form_contact()});